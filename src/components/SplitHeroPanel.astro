---
import { Icon } from "astro-icon/components";

interface Props {
  accent: "blue" | "red";
  title: string;
  quote?: string;
  subtitle?: string;
  bullets: { icon: string; text: string }[];
  cta: string;
  secondary: string;
  href: string;
  secondaryHref: string;
  responseTime?: string;
  image?: {
    src: string;
    alt: string;
    width?: number;
    height?: number;
  };
}

const { accent, title, quote, subtitle, bullets, cta, secondary, href, secondaryHref, responseTime, image } = Astro.props;
---
<div
  class="split-panel card-surface relative flex h-full min-h-[52vh] flex-col justify-between overflow-hidden border-2 border-transparent p-6 text-left transition-colors"
  style={`--accent: var(--${accent});`}
>
  <a href={href} aria-label={cta} class="absolute inset-0 z-0 focus-ring"></a>
  <div class="glow"></div>
  <div class="relative z-10 pointer-events-none">
    {image && (
      <div class="mb-4 overflow-hidden rounded-2xl border border-white/10 shadow-xl">
        <img
          class="h-48 w-full object-cover object-center sm:h-56"
          src={image.src}
          alt={image.alt}
          width={image.width}
          height={image.height}
          loading="lazy"
          decoding="async"
        />
      </div>
    )}
    {quote && <p class="text-sm text-muted">{quote}</p>}
    <h2 class="mt-4 text-2xl font-semibold text-text sm:text-3xl">{title}</h2>
    {subtitle && <p class="mt-3 text-base text-muted sm:text-lg">{subtitle}</p>}
    <ul class="mt-5 space-y-3 text-sm text-muted">
      {bullets.map((bullet) => (
        <li class="flex items-start gap-3">
          <span class="mt-1 flex h-8 w-8 items-center justify-center rounded-2xl border border-stroke/70 bg-black/20 text-accent">
            <Icon name={bullet.icon} class="h-4 w-4" aria-hidden="true" />
          </span>
          <span class="pt-1">{bullet.text}</span>
        </li>
      ))}
    </ul>
    {responseTime && <p class="mt-4 text-xs uppercase tracking-[0.2em] text-muted">{responseTime}</p>}
  </div>
  <div class="split-card relative z-10 mt-6 flex flex-col gap-3 sm:flex-row pointer-events-auto">
    <a class="button button-primary w-full sm:w-auto focus-ring" href={href}>{cta}</a>
    <a class="button button-secondary w-full sm:w-auto focus-ring" href={secondaryHref}>{secondary}</a>
  </div>
</div>
